<Window x:Class="OrderWatch.Views.LogViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="日志查看器" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 标题 -->
        <TextBlock Grid.Row="0" Text="📋 系统日志和历史记录" 
                   FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
        
        <!-- 筛选控件 -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Grid.Column="0" Text="开始时间:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <DatePicker Grid.Column="1" x:Name="StartDatePicker" SelectedDate="{Binding StartDate}" Width="120" Margin="0,0,10,0"/>
            
            <TextBlock Grid.Column="2" Text="结束时间:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <DatePicker Grid.Column="3" x:Name="EndDatePicker" SelectedDate="{Binding EndDate}" Width="120" Margin="0,0,10,0"/>
            
            <TextBlock Grid.Column="4" Text="类别:" VerticalAlignment="Center" Margin="10,0,5,0"/>
            <ComboBox Grid.Column="5" x:Name="CategoryComboBox" 
                      ItemsSource="{Binding Categories}" 
                      SelectedItem="{Binding SelectedCategory}"
                      Width="120"/>
        </Grid>
        
        <!-- 日志列表 -->
        <DataGrid Grid.Row="2" x:Name="LogsDataGrid" 
                  ItemsSource="{Binding Logs}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column"
                  CanUserResizeRows="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  SelectionMode="Single">
            <DataGrid.Columns>
                <DataGridTextColumn Header="时间" Binding="{Binding FormattedTimestamp}" Width="150"/>
                <DataGridTextColumn Header="级别" Binding="{Binding Level}" Width="80"/>
                <DataGridTextColumn Header="类别" Binding="{Binding Category}" Width="100"/>
                <DataGridTextColumn Header="消息" Binding="{Binding Message}" Width="*"/>
                <DataGridTextColumn Header="合约" Binding="{Binding Symbol}" Width="100"/>
                <DataGridTextColumn Header="操作" Binding="{Binding Action}" Width="80"/>
                <DataGridTextColumn Header="价格" Binding="{Binding Price, StringFormat=F4}" Width="80"/>
                <DataGridTextColumn Header="数量" Binding="{Binding Quantity, StringFormat=F4}" Width="80"/>
                <DataGridTextColumn Header="结果" Binding="{Binding Result}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- 底部按钮 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="刷新" Command="{Binding RefreshCommand}" Width="80" Margin="0,0,10,0"/>
            <Button Content="导出" Command="{Binding ExportCommand}" Width="80" Margin="0,0,10,0"/>
            <Button Content="清理日志" Command="{Binding CleanupCommand}" Width="80" Margin="0,0,10,0"/>
            <Button Content="关闭" Click="CloseButton_Click" Width="80"/>
        </StackPanel>
    </Grid>
</Window>
